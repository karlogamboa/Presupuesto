<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Solicitud de Presupuesto</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }
    header {
      background-color: #0056b3;
      color: white;
      padding: 15px 0;
      text-align: center;
      margin-bottom: 30px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    h1 {
      margin: 0;
      font-size: 24px;
    }
    .card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 25px;
      padding: 20px;
    }
    .card-title {
      margin-top: 0;
      color: #0056b3;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
      font-size: 18px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }
    select, input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 14px;
    }
    select:focus, input:focus {
      outline: none;
      border-color: #0056b3;
    }
    .read-only {
      background-color: #f9f9f9;
      cursor: not-allowed;
    }
    .row {
      display: flex;
      flex-wrap: wrap;
      margin: 0 -10px;
    }
    .col {
      flex: 1;
      padding: 0 10px;
      min-width: 200px;
    }
    .btn {
      background-color: #0056b3;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      display: inline-block;
      margin-right: 10px;
    }
    .btn:hover {
      background-color: #003d82;
    }
    .btn-secondary {
      background-color: #6c757d;
    }
    .btn-secondary:hover {
      background-color: #5a6268;
    }
    .confirmation-box {
      text-align: center;
      padding: 15px;
      margin-top: 15px;
      border-radius: 4px;
      font-weight: 600;
    }
    .confirmation-pending {
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
    }
    .confirmation-success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .currency-input {
      position: relative;
    }
    .currency-symbol {
      position: absolute;
      left: 10px;
      top: 9px;
    }
    .currency-field {
      padding-left: 25px !important;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Sistema de Solicitud de Presupuesto</h1>
    </div>
  </header>
  
  <div class="container">
    <form id="expense-form">
      <!-- INFORMACIÓN PERSONAL -->
      <div class="card">
        <h2 class="card-title">INFORMACIÓN PERSONAL</h2>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="solicitante">Nombre del Solicitante:</label>
              <select id="solicitante" required>
                <option value="">Seleccione un solicitante</option>
                <option value="1">Ana Martínez</option>
                <option value="2">Carlos López</option>
                <option value="3">María González</option>
                <option value="4">Juan Hernández</option>
                <option value="5">Patricia Ortiz</option>
              </select>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label for="area">Área:</label>
              <select id="area" required>
                <option value="">Seleccione un área</option>
                <option value="finanzas">Finanzas</option>
                <option value="rh">Recursos Humanos</option>
                <option value="operaciones">Operaciones</option>
                <option value="ventas">Ventas</option>
                <option value="ti">Tecnología</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="empleado">Número de Empleado:</label>
              <input type="text" id="empleado" readonly class="read-only">
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label for="sub-departamento">Sub-Departamento:</label>
              <select id="sub-departamento" required>
                <option value="">Seleccione un sub-departamento</option>
                <option value="contabilidad">Contabilidad</option>
                <option value="tesoreria">Tesorería</option>
                <option value="capacitacion">Capacitación</option>
                <option value="logistica">Logística</option>
                <option value="desarrollo">Desarrollo</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="ceco">Centro de Costos:</label>
              <input type="text" id="ceco" readonly class="read-only">
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label for="correo">Correo:</label>
              <select id="correo" required>
                <option value="">Seleccione un correo</option>
                <option value="ana.martinez@empresa.com">ana.martinez@empresa.com</option>
                <option value="carlos.lopez@empresa.com">carlos.lopez@empresa.com</option>
                <option value="maria.gonzalez@empresa.com">maria.gonzalez@empresa.com</option>
                <option value="juan.hernandez@empresa.com">juan.hernandez@empresa.com</option>
                <option value="patricia.ortiz@empresa.com">patricia.ortiz@empresa.com</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      
      <!-- INFORMACIÓN DEL GASTO -->
      <div class="card">
        <h2 class="card-title">INFORMACIÓN DEL GASTO</h2>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="categoria">Categoría de Gasto:</label>
              <select id="categoria" required>
                <option value="">Seleccione una categoría</option>
                <option value="viajes">Viajes</option>
                <option value="oficina">Material de Oficina</option>
                <option value="tecnologia">Equipos Tecnológicos</option>
                <option value="capacitacion">Capacitación</option>
                <option value="otros">Otros</option>
              </select>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label for="cuenta">Cuenta de Gastos:</label>
              <input type="text" id="cuenta" readonly class="read-only">
            </div>
          </div>
        </div>
      </div>
      
      <!-- PRESUPUESTO -->
      <div class="card">
        <h2 class="card-title">PRESUPUESTO</h2>
        <div class="form-group">
          <label for="tipo-presupuesto">Seleccione Tipo de Presupuesto:</label>
          <select id="tipo-presupuesto" required>
            <option value="">Seleccione una opción</option>
            <option value="departamento">Presupuesto por Departamento</option>
            <option value="area">Presupuesto por Área</option>
          </select>
        </div>
        
        <div id="presupuesto-info" class="form-group" style="display: none;">
          <label>Información de Presupuesto:</label>
          <div id="presupuesto-detalle" style="padding: 10px; background-color: #f9f9f9; border-radius: 4px; border: 1px solid #ddd;">
            Seleccione un tipo de presupuesto para ver detalles
          </div>
        </div>
      </div>
      
      <!-- MONTO -->
      <div class="card">
        <h2 class="card-title">MONTO</h2>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="subtotal">Monto Subtotal:</label>
              <div class="currency-input">
                <span class="currency-symbol">$</span>
                <input type="number" id="subtotal" step="0.01" min="0" class="currency-field" required placeholder="0.00">
              </div>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label for="iva">IVA (16%):</label>
              <div class="currency-input">
                <span class="currency-symbol">$</span>
                <input type="text" id="iva" readonly class="read-only currency-field" placeholder="0.00">
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="total">Total:</label>
          <div class="currency-input">
            <span class="currency-symbol">$</span>
            <input type="text" id="total" readonly class="read-only currency-field" placeholder="0.00">
          </div>
        </div>
      </div>
      
      <!-- CONFIRMACIÓN -->
      <div class="card">
        <h2 class="card-title">CONFIRMACIÓN</h2>
        <div id="confirmation" class="confirmation-box confirmation-pending">
          Pendiente de envío
        </div>
        
        <div style="margin-top: 20px; text-align: right;">
          <button type="button" class="btn btn-secondary" id="btn-limpiar">Limpiar formulario</button>
          <button type="submit" class="btn" id="btn-enviar">Enviar solicitud</button>
        </div>
      </div>
    </form>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Datos de ejemplo para la demostración
      const empleados = {
        '1': { numero: 'EMP-001', ceco: 'CC-FIN-01', correo: 'ana.martinez@empresa.com' },
        '2': { numero: 'EMP-002', ceco: 'CC-RH-01', correo: 'carlos.lopez@empresa.com' },
        '3': { numero: 'EMP-003', ceco: 'CC-OP-01', correo: 'maria.gonzalez@empresa.com' },
        '4': { numero: 'EMP-004', ceco: 'CC-VEN-01', correo: 'juan.hernandez@empresa.com' },
        '5': { numero: 'EMP-005', ceco: 'CC-TI-01', correo: 'patricia.ortiz@empresa.com' }
      };
      
      const categoriasCuentas = {
        'viajes': 'CTA-6010',
        'oficina': 'CTA-6020',
        'tecnologia': 'CTA-6030',
        'capacitacion': 'CTA-6040',
        'otros': 'CTA-6090'
      };
      
      const presupuestos = {
        'departamento': {
          'finanzas': 'Presupuesto disponible: $50,000 MXN',
          'rh': 'Presupuesto disponible: $35,000 MXN',
          'operaciones': 'Presupuesto disponible: $70,000 MXN',
          'ventas': 'Presupuesto disponible: $85,000 MXN',
          'ti': 'Presupuesto disponible: $100,000 MXN'
        },
        'area': {
          'contabilidad': 'Presupuesto disponible: $25,000 MXN',
          'tesoreria': 'Presupuesto disponible: $25,000 MXN',
          'capacitacion': 'Presupuesto disponible: $35,000 MXN',
          'logistica': 'Presupuesto disponible: $40,000 MXN',
          'desarrollo': 'Presupuesto disponible: $60,000 MXN'
        }
      };
      
      // Elementos del formulario
      const solicitanteSelect = document.getElementById('solicitante');
      const empleadoInput = document.getElementById('empleado');
      const cecoInput = document.getElementById('ceco');
      const correoSelect = document.getElementById('correo');
      const categoriaSelect = document.getElementById('categoria');
      const cuentaInput = document.getElementById('cuenta');
      const subtotalInput = document.getElementById('subtotal');
      const ivaInput = document.getElementById('iva');
      const totalInput = document.getElementById('total');
      const presupuestoSelect = document.getElementById('tipo-presupuesto');
      const presupuestoInfo = document.getElementById('presupuesto-info');
      const presupuestoDetalle = document.getElementById('presupuesto-detalle');
      const form = document.getElementById('expense-form');
      const btnLimpiar = document.getElementById('btn-limpiar');
      const confirmationBox = document.getElementById('confirmation');
      const areaSelect = document.getElementById('area');
      const subDepartamentoSelect = document.getElementById('sub-departamento');
      
      // Event handlers
      solicitanteSelect.addEventListener('change', function() {
        const solicitanteId = this.value;
        if (solicitanteId && empleados[solicitanteId]) {
          empleadoInput.value = empleados[solicitanteId].numero;
          cecoInput.value = empleados[solicitanteId].ceco;
          correoSelect.value = empleados[solicitanteId].correo;
        } else {
          empleadoInput.value = '';
          cecoInput.value = '';
          correoSelect.value = '';
        }
      });
      
      correoSelect.addEventListener('change', function() {
        // Sincronizar el solicitante si se cambia el correo
        const correoValue = this.value;
        for (const [id, data] of Object.entries(empleados)) {
          if (data.correo === correoValue) {
            solicitanteSelect.value = id;
            empleadoInput.value = data.numero;
            cecoInput.value = data.ceco;
            break;
          }
        }
      });
      
      categoriaSelect.addEventListener('change', function() {
        const categoriaValue = this.value;
        cuentaInput.value = categoriaValue ? categoriasCuentas[categoriaValue] : '';
      });
      
      // Calcular IVA y total cuando cambia el subtotal
      subtotalInput.addEventListener('input', calcularTotal);
      
      function calcularTotal() {
        const subtotal = parseFloat(subtotalInput.value) || 0;
        const iva = subtotal * 0.16;
        const total = subtotal + iva;
        
        ivaInput.value = iva.toFixed(2);
        totalInput.value = total.toFixed(2);
      }
      
      // Mostrar información de presupuesto
      presupuestoSelect.addEventListener('change', function() {
        const tipoPresupuesto = this.value;
        presupuestoInfo.style.display = tipoPresupuesto ? 'block' : 'none';
        
        if (tipoPresupuesto === 'departamento') {
          const area = areaSelect.value;
          presupuestoDetalle.textContent = area && presupuestos.departamento[area] 
            ? presupuestos.departamento[area] 
            : 'Seleccione un área para ver el presupuesto disponible';
        } else if (tipoPresupuesto === 'area') {
          const subDepto = subDepartamentoSelect.value;
          presupuestoDetalle.textContent = subDepto && presupuestos.area[subDepto] 
            ? presupuestos.area[subDepto] 
            : 'Seleccione un sub-departamento para ver el presupuesto disponible';
        }
      });
      
      // Actualizar presupuesto cuando cambia el área o sub-departamento
      areaSelect.addEventListener('change', function() {
        if (presupuestoSelect.value === 'departamento') {
          const area = this.value;
          presupuestoDetalle.textContent = area && presupuestos.departamento[area] 
            ? presupuestos.departamento[area] 
            : 'Seleccione un área para ver el presupuesto disponible';
        }
      });
      
      subDepartamentoSelect.addEventListener('change', function() {
        if (presupuestoSelect.value === 'area') {
          const subDepto = this.value;
          presupuestoDetalle.textContent = subDepto && presupuestos.area[subDepto] 
            ? presupuestos.area[subDepto] 
            : 'Seleccione un sub-departamento para ver el presupuesto disponible';
        }
      });
      
      // Enviar formulario
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        // Aquí iría la lógica para enviar los datos al servidor
        confirmationBox.textContent = 'Solicitud enviada con éxito';
        confirmationBox.className = 'confirmation-box confirmation-success';
        
        // En un caso real, aquí se enviarían los datos al servidor
        console.log('Formulario enviado');
        console.log({
          solicitante: solicitanteSelect.options[solicitanteSelect.selectedIndex].text,
          area: areaSelect.options[areaSelect.selectedIndex].text,
          empleado: empleadoInput.value,
          subDepartamento: subDepartamentoSelect.options[subDepartamentoSelect.selectedIndex].text,
          ceco: cecoInput.value,
          correo: correoSelect.value,
          categoria: categoriaSelect.options[categoriaSelect.selectedIndex].text,
          cuenta: cuentaInput.value,
          subtotal: subtotalInput.value,
          iva: ivaInput.value,
          total: totalInput.value
        });
      });
      
      // Limpiar formulario
      btnLimpiar.addEventListener('click', function() {
        form.reset();
        empleadoInput.value = '';
        cecoInput.value = '';
        cuentaInput.value = '';
        ivaInput.value = '';
        totalInput.value = '';
        presupuestoInfo.style.display = 'none';
        confirmationBox.textContent = 'Pendiente de envío';
        confirmationBox.className = 'confirmation-box confirmation-pending';
      });
    });
  </script>
</body>
</html>